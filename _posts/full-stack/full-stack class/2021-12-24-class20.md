---
title: 강의20
category: fullstack-class
---

# 12.24

**[게시판]**

글쓰기저장은 왜 POST 에 포워딩이 아니라 redirect 인가?





**Write.java**

1. 글 저장 로직 처리
   - request 이름 비밀번호 이메일 제목 내용 html 적용여부
   - BoardDTO dto
   - int BoardDAOImpl.insert(dto)
   - int 1 이면 리다이렉트
2. 리다이렉트 (글 목록)
   - 1이 아니면 오류처리 (추가)



**List.java**

1. 글  목록 로직처리
   - 현재페이지 (currentPage = 1)
   - BoardDAOImple.select(currentPage, numberPerPage)
   - request.setAttribute("list", list);
2. 포워딩 (list.jsp)



수료생 블로그: https://daspace.tistory.com/255?category=1171381



**문제**

글작성이 성공하면 alert 알람을 띄우자.

1. 글쓰기 성공이라는 경고창은 서버에서 띄울 수 없다. -> 신호는 줄 수 있다.



Q. 리다이렉트는 setAttribute 가 작동하지 않나?

A. 



**Write.java**

```java
if (rowCount == 1) {
    location += "?write=success";
}
```

**list.jsp**

```javascript
if ('${param.write}' == 'success') {
    alert("글 쓰기 완료!!!");
}
```

try-catch 에도 넣어보자.

EL `${param.write}` 는 서버주석처리 해야한다.

문자열인 경우 따옴표에 넣어야한다.



## **글보기**

list.jsp 페이지에서 보고자하는 게시글의 제목을 클릭.

+++ 클릭한 게시글의 글번호 (seq) 를 가지고 글보기 (Content.java) 서블릿 요청

`/jspPro/cstvsboard/content.html` -> Content.java 서블릿 호출





복습: 글 작성 후 페이지색칠, 페이지 선택 시 다음 글 표시





1. 해당 게시글 조회수 증가
2. 해당 게시글 정보 -> dto
3. request.setAttribute("dto", dto)



> 게시글을 못 불러왔을 경우 트랜잭션 처리: Service.java 



**트랜잭션처리 함수**

**conn.**

- `setAutoCommit(false)` 
- `commit` 
- `rollback` 



**Content.java**

```java
package days04.board;

import java.io.IOException;
import java.sql.Connection;
import java.sql.SQLException;
import java.util.ArrayList;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.util.DBConn;

@WebServlet("/cstvsboard/content.html")
public class Content extends HttpServlet {
	private static final long serialVersionUID = 1L;
       
    public Content() {
        super();
    }

	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		System.out.println("> Content.doGet() 호출됨...");
		int seq = Integer.parseInt(request.getParameter("seq"));
		
		// 1. ?seq=401 -> BoardDTO dto -> request.setAttribute()
		
		// 
		Connection conn = DBConn.getConnection();
		BoardDAOImpl dao = new BoardDAOImpl(conn);
		BoardDTO dto = null;
		
		try {
			// **** 트랜잭션 처리 + 로그 처리: Service.java ****
//			conn.setAutoCommit(false);
			
			// ㄱ. 해당 게시글 조회수 증가
			dao.increaseReaded(seq);
			
			// ㄴ. 해당 게시글 정보 -> dto
			dto = dao.view(seq);
//			conn.commit();
			
			// ㄷ. request.setAttribute("dto", dto) -> ${dto}
			request.setAttribute("dto", dto);
		} catch (SQLException e) {
			System.out.println("> Content.java doGet() Exception...");
//			conn.rollback();
			e.printStackTrace();
		}
		DBConn.close();

		
		// 2. 포워딩
		String path = "/days04/board/content.jsp";
		request.getRequestDispatcher(path).forward(request, response);
	}

	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		doGet(request, response);
	}

}
```



**content.jsp**

```jsp
<%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@include file="/include.jspf" %>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<style>
table {
	border-spacing: 3px;
	border-collapse: separate;
}

table, tr, td {
	border: solid 1px gray;
	/* border-radius: 3px;  
      padding:3px;   */
}

#tblContent {
	width: 600px;
}
</style>
<title>Insert title here</title>
</head>
<body>

	<h3>content.jsp</h3>

	<div align="center">
		<h2>내용보기</h2>
		<!-- <table id="tblContent" class="table"> -->
		<table id="tblContent">
			<tr>
				<td>이름</td>
				<td>${dto.writer }</td>
				<td>등록일</td>
				<td>${dto.writedate }</td>
			</tr>
			<tr>
				<td>Email</td>
				<td><a href="mailto:${dto.email }">${dto.email }</a></td>
				<td>조회</td>
				<td>${dto.readed }</td>
			</tr>
			<tr>
				<td>제목</td>
				<td colspan="3">${dto.title }</td>
			</tr>
			<tr>
				<td colspan="4"
					style="padding: 15px; height: 200px; text-align: left; vertical-align: top">
					${dto.content }
				</td>
			</tr>
			<tr>
				<td colspan="4" align="center">
					<a class="btn btn-secondary" href="<%=contextPath %>/cstvsboard/edit.html?seq=${dto.seq}" id="editLink">수정하기</a> 
					<a class="btn btn-secondary" href="<%=contextPath %>/cstvsboard/delete.html?seq=${dto.seq}" id="deleteLink">삭제하기</a> 
					<a class="btn btn-secondary" href="<%=contextPath %>/cstvsboard/list.html" id="homeLink">Home</a></td>
			</tr>
		</table>
	</div>

	<script>
		if ('${param.edit}' == 'success') {
		    alert("글 수정 완료!!!");
		} else if ('${param.edit}' == 'fail') {
		    alert("글 수정 실패!!!");
		}
	</script>
</body>
</html>
```



## **글수정**

- Edit.java 서블릿
- ?seq=401 dto
- edit.jsp 포워딩



**자바스크립트**

```javascript
history.back();
```



```javascript
$(":radio[name=tag value=${dto.tag}]").attr("checked", true);
```



```javascript
$(":radio[name=tag][value=${dto.tag}]").attr("checked", true);
```

> 다중선택자는 다음과 같이 대괄호를 한개로 쓸 수 없다. `[name=tag value=${dto.tag}]` 



**Edit.java**

```java
package days04.board;

import java.io.IOException;
import java.sql.Connection;
import java.sql.SQLException;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.util.DBConn;

@WebServlet("/cstvsboard/edit.html")
public class Edit extends HttpServlet {
	private static final long serialVersionUID = 1L;
       
    public Edit() {
        super();
    }

	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		System.out.println("> Edit.doGet() 호출됨...");
		// 1. ?seq=401 -> BoardDTO dto -> request.setAttribute()
		int seq = Integer.parseInt(request.getParameter("seq"));
		
		// 
		Connection conn = DBConn.getConnection();
		BoardDAOImpl dao = new BoardDAOImpl(conn);
		BoardDTO dto = null;
		
		try {
			// 해당 게시글 번호의 정보를 dto 로 가져오면... view()
			dto = dao.view(seq);
			
			// ㄷ. request.setAttribute("dto", dto) -> ${dto}
			request.setAttribute("dto", dto);
		} catch (SQLException e) {
			System.out.println("> Content.java doGet() Exception...");
//			conn.rollback();
			e.printStackTrace();
		}
		DBConn.close();
		

		String path = "/days04/board/edit.jsp";
		request.getRequestDispatcher(path).forward(request, response);

	}

	// 수정된 게시글 정보를 update -> 글목록/글보기
	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		request.setCharacterEncoding("UTF-8");
		System.out.println("> Edit.doGet() 호출됨...");
		int seq = Integer.parseInt(request.getParameter("seq"));
		
		String pwd = request.getParameter("pwd");
		String email = request.getParameter("email");
		String title = request.getParameter("title");
		String content = request.getParameter("content");
		int tag = Integer.parseInt(request.getParameter("tag"));
		
		// BoardDTO dto
		BoardDTO dto = new BoardDTO();
		dto.setPwd(pwd);
		dto.setEmail(email);
		dto.setTitle(title);
		dto.setContent(content);
		dto.setTag(tag);
		dto.setSeq(seq);
		
		//
		Connection conn = DBConn.getConnection();
		BoardDAOImpl dao = new BoardDAOImpl(conn);
		int rowCount = 0;
		
		try {
			rowCount = dao.update(dto);
			request.setAttribute("insert", true);
		} catch (SQLException e) {
			System.out.println("> Edit.java doPost() Exception...");
			e.printStackTrace();
		}
		DBConn.close();

		
		// 2. 리다이렉트 (글 목록)
		String location = "/jspPro3/cstvsboard/content.html?seq=" + seq;
		
		if (rowCount == 1) location += "&edit=success";
		else location += "&edit=fail";
		
		response.sendRedirect(location);
	}
}
```



**edit.jsp**

```jsp
<%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@include file="/include.jspf" %>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<style>
table, td, th {
	border: solid 1px gray;
}

table {
	border-spacing: 3px;
	border-collapse: separate;
}

table, tr, td {
	/* border-radius: 3px; */
	/*  padding:3px;  */
	
}

table {
	width: 600px;
}
</style>
<title>Insert title here</title>
</head>
<body>

	<div align="center">
      <h2>수정하기</h2>
      <!--  http://localhost/jspPro/cstvsboard/edit.htm?seq=146 -->
      <form method="post">
         <table>
            <tr>
               <td colspan="2" align="center"><b>글을 수정합니다</b></td>
            </tr>
            <tr>
               <td align="center">이름</td>
               <td>
                 <input type="text" readonly name="writer" size="15" value="${dto.writer }">
               </td>
            </tr>
            <tr>
               <td align="center">Email</td>
               <td>
                 <input type="email" name="email" size="50" value="${dto.email }">
               </td>
            </tr>
            <tr>
               <td align="center">제목</td>
               <td>
                 <input type="text" name="title" size="50"   value="${dto.title }">
               </td>
            </tr>
            <tr>
               <td align="center">내용</td>
               <td><textarea name="content" cols="50" rows="10">${dto.content }</textarea>
               </td>
            </tr>
            <tr>
               <td align="center">HTML</td>
               <td>
               		tag: ${dto.tag }
                  <input type="radio" name="tag" value="1">적용
                  <input type="radio" name="tag" value="0">비적용
                  <script>
                  	$(":radio[name=tag][value=${dto.tag}]").attr("checked", true);
                  </script>
                   </td>
            </tr>
            <tr>
               <td align="center">비밀번호</td>
               <td><input type="password" name="pwd" size="15"></td>
            </tr>
            <tr>
               <td colspan="2" align="center">
                 <input type="submit" value="작성 완료">
                 &nbsp;&nbsp; 
                 <input type="button" onClick="history.back();" value="이전으로">
               </td>
            </tr>
         </table>
      </form>
   </div>
</body>
</html>
```





```java
request.setCharacterEncoding("UTF-8");
```

UTF-8 이 소문자여도 상관없다.

## 글삭제

1. 삭제버튼 클릭
2. Delete.java 서블릿 doGet() {
3. list.html 요청 -> list.jsp
4. Delete.java -> doPost() {
   - ?seq=890
   - pwd



**Delete.java**

```java
package days04.board;

import java.io.IOException;
import java.sql.Connection;
import java.sql.SQLException;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.util.DBConn;

@WebServlet("/cstvsboard/delete.html")
public class Delete extends HttpServlet {
	private static final long serialVersionUID = 1L;
    public Delete() {}

	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		System.out.println("> Delete.doGet() 호출됨...");
		
		int seq = Integer.parseInt(request.getParameter("seq"));
		
		// 포워딩.
		String path = "/days04/board/delete.jsp";
//		String path = "/cstvsboard/content.html";
		request.getRequestDispatcher(path).forward(request, response);
	}

	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		request.setCharacterEncoding("utf-8");
		
		// ?seq=890
		// pwd
		int rowCount = 0;
		int seq = Integer.parseInt(request.getParameter("seq"));
		String pwd = request.getParameter("pwd"); // 입력받은 비밀번호
		
		
		Connection conn = DBConn.getConnection();
		BoardDAOImpl dao = new BoardDAOImpl(conn);
		BoardDTO dto = null;
		
		
		try {
			// 해당 게시글 번호의 정보를 dto 로 가져오면... view()
			dto = dao.view(seq);
			String originalPwd = dto.getPwd();
			
			if (!pwd.equals(originalPwd)) {
				request.setAttribute("error", "비밀번호가 틀립니다.");
				doGet(request, response);
				return;
			} 
			
			// 삭제 -> 페이지이동
			rowCount = dao.delete(seq);
		} catch (SQLException e) {
			System.out.println("> Delete.java doPost() Exception...");
//			conn.rollback();
			e.printStackTrace();
		}
		DBConn.close();
		
		// 리다이렉트
		String location = "/jspPro3/cstvsboard/list.html";
		if (rowCount == 1) location += "?delete=success";
		response.sendRedirect(location);

	}
}
```

**delete.jsp**

```jsp
<%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@include file="/include.jspf"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<style>
table, td, th {
	border: solid 1px gray;
}

table {
	border-spacing: 3px;
	border-collapse: separate;
}

table, tr, td {
	/* border-radius: 3px; */
	/* padding:3px;  */
	
}

table {
	width: 600px;
}
</style>
<title>Insert title here</title>
</head>
<body>

	<h3>delete.jsp</h3>

	<div align="center">
		<h2>삭제하기</h2>
		<form method="post">
			<table>
				<tr>
					<td colspan="2" align="center"><b>글을 삭제합니다</b></td>
				</tr>
				<tr>
					<td align="center">비밀번호</td>
					<td><input type="password" name="pwd" size="15"
						autofocus="autofocus"></td>
				</tr>
				<tr>
					<td colspan="2" align="center">
					<input type="submit" value="삭제">&nbsp;&nbsp;
						<input type="button" id="cancel" value="취소"></td>
				</tr>
			</table>
		</form>
	</div>
	
	
<%
	// ?error=비밀~~
	String error = (String) request.getAttribute("error");
	if (error != null) {
%>
	<script>
		alert("<%=error%>");
	</script>
<% 
	}
%>

	<script>
		$("#cancel").on("click", function(event) {
			location.href = "${pageContext.request.contextPath}/cstvsboard/content.html?seq=${param.seq}";
		});
	</script>
</body>
</html>
```



**리다이렉트**

```java
String location = "/jspPro/cstvsboard/list.html";
if (rowCount == 1) location += "?delete=success";
response.sendRedirect(location);
```

> 리다이렉트는 프로젝트경로도 추가해야 한다.



> a태그로 넘기면 기본 get 방식으로 넘어간다.



**getParameter vs getAttribute**





**문제**

취소버튼 누르면 돌아오기

**delete.jsp**

```javascript
$("#cancel").click(function() {
    $(location).attr("href", "<%=contextPath%>/cstvsboard/content.html?seq=${param.seq}");
});
```

> URL 에 붙는 것은 파라미터이다.

**쌤코드**

```javascript
$("#cancel").on("click", function(event) {
    location.href = "${pageContext.request.contextPath}/cstvsboard/content.html?seq=${param.seq}";
});
```

- `${pageContext.request.contextPath}`  
- `request.getContextPath();` 같은코드이다.





content.jsp 복사 붙이기 -> content02.jsp

- content.jsp 파일수정
- [삭제하기] 버튼을 클릭하면 삭제하는 모달창을 띄우기.

### 모달창



> 스크립트 태그가 HTML 코드보다 아래에 있어야 한다.



**content.jsp**

```jsp
<%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@include file="/include.jspf"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet"
	href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<link rel="stylesheet" href="/resources/demos/style.css">
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>


<style>
table {
	border-spacing: 3px;
	border-collapse: separate;
}

table, tr, td {
	border: solid 1px gray;
	/* border-radius: 3px;  
      padding:3px;   */
}

#tblContent {
	width: 600px;
}
</style>
<title>Insert title here</title>
</head>
<body>

	<h3>content.jsp</h3>

	<div align="center">
		<h2>내용보기</h2>
		<!-- <table id="tblContent" class="table"> -->
		<table id="tblContent">
			<tr>
				<td>이름</td>
				<td>${dto.writer }</td>
				<td>등록일</td>
				<td>${dto.writedate }</td>
			</tr>
			<tr>
				<td>Email</td>
				<td><a href="mailto:${dto.email }">${dto.email }</a></td>
				<td>조회</td>
				<td>${dto.readed }</td>
			</tr>
			<tr>
				<td>제목</td>
				<td colspan="3">${dto.title }</td>
			</tr>
			<tr>
				<td colspan="4"
					style="padding: 15px; height: 200px; text-align: left; vertical-align: top">
					${dto.content }</td>
			</tr>
			<tr>
				<td colspan="4" align="center">
					<a class="btn btn-secondary"
						href="<%=contextPath %>/cstvsboard/edit.html?seq=${dto.seq}"
						id="editLink">수정하기</a> 
					<a class="btn btn-secondary"
						href="<%=contextPath %>/cstvsboard/delete.html?seq=${dto.seq}"
						id="deleteLink">삭제하기</a> 
					<a class="btn btn-secondary"
						href="<%=contextPath%>/cstvsboard/list.html" id="homeLink">Home</a>
					<input type="button" class="btn btn-secondary" 
						id="btnModalDelete" value="모달창으로 글삭제"  />
				</td>
			</tr>
		</table>
	</div>

	<!-- 삭제 모달창 div -->
	<div id="dialog-form" align="center" title="삭제">
		<h2>삭제하기</h2>
		<form method="post" action="<%=contextPath%>/cstvsboard/delete.html">
			<table>
				<tr>
					<td colspan="2" align="center"><b>글을 삭제합니다</b></td>
				</tr>
				<tr>
					<td align="center">비밀번호</td>
					<td>
						<input type="password" name="pwd" size="15" 
							autofocus="autofocus">
					</td>
				</tr>
				<tr>
					<td colspan="2" align="center">
						<input type="submit" value="삭제">&nbsp;&nbsp;
						<input type="button" id="cancel" value="취소">
					</td>
				</tr>
			</table>
			<input type="hidden" name="seq" value="${param.seq }" />
		</form>

	</div>
	
		<script>
		// 1. 
		dialog = $("#dialog-form").dialog({
			autoOpen: false,
		      height: 400,
		      width: 350,
		      modal: true,
		      buttons:{},
		      close: function (){
		         form[0].reset();
		      }
		});
		
		// 2.
		form = dialog.find("form");
	
		// 모달창 관련 스크립트 코딩
		$("#btnModalDelete").on("click", function(event) {
			dialog.dialog("open");
		});
		
		$("#cancel").on("click", function(event) {
			dialog.dialog("close");
		});
	</script>

	<script>
		if ('${param.edit}' == 'success') {
			alert("글 수정 완료!!!");
		} else if ('${param.edit}' == 'fail') {
			alert("글 수정 실패!!!");
		}
	</script>
</body>
</html>
```



**Delete.java**

```java
package days04.board;

import java.io.IOException;
import java.sql.Connection;
import java.sql.SQLException;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.util.DBConn;

@WebServlet("/cstvsboard/delete.html")
public class Delete extends HttpServlet {
	private static final long serialVersionUID = 1L;
    public Delete() {}

	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		System.out.println("> Delete.doGet() 호출됨...");
		
		int seq = Integer.parseInt(request.getParameter("seq"));
		
		// 포워딩.
		String path = "/days04/board/delete.jsp";
		request.getRequestDispatcher(path).forward(request, response);
	}

	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		request.setCharacterEncoding("utf-8");
		
		// ?seq=890
		// pwd
		int rowCount = 0;
		int seq = Integer.parseInt(request.getParameter("seq"));
		String pwd = request.getParameter("pwd"); // 입력받은 비밀번호
		
		
		Connection conn = DBConn.getConnection();
		BoardDAOImpl dao = new BoardDAOImpl(conn);
		BoardDTO dto = null;
		
		
		try {
			// 해당 게시글 번호의 정보를 dto 로 가져오면... view()
			dto = dao.view(seq);
			String originalPwd = dto.getPwd();
			
			if (!pwd.equals(originalPwd)) {
				request.setAttribute("error", "비밀번호가 틀립니다.");
				doGet(request, response);
				return;
			} 
			
			// 삭제 -> 페이지이동
			rowCount = dao.delete(seq);
		} catch (SQLException e) {
			System.out.println("> Delete.java doPost() Exception...");
//			conn.rollback();
			e.printStackTrace();
		}
		DBConn.close();
		
		// 리다이렉트
		String location = "/jspPro3/cstvsboard/list.html";
		if (rowCount == 1) location += "?delete=success";
		response.sendRedirect(location);

	}
}
```



(6) 게시글 작성한 시간이 한시간이 안지났다면 게시글 앞에 뉴라는 마크 (이미지)

## 새글





**list.jsp**

```jsp
<%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ include file="/include.jspf" %>

<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>2021. 12. 23. - 오후 3:06:20</title>
<link rel="icon" type="image/x-icon" href="../images/SiSt.ico">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> 

<style>
table, td, th {
   border: solid 1px gray;
}

table {
   border-spacing: 3px;
   border-collapse: separate;
}

table, tr, td {
   /* border-radius: 3px; */
   /* padding:3px;  */
   
}

tbody tr  td:nth-of-type(2) {
   text-align: left;
}

a {
   text-decoration: none;
   color: black;
}

a:hover {
   color: red;
}
</style>
<!-- 페이징 처리 style -->
<style>
.pagination {
   margin: 0 auto;
   display: flex;
   justify-content: center;
}

.pagination a {
   color: black;
   float: left;
   padding: 4px 8px;
   text-decoration: none;
   transition: background-color .3s;
}

.pagination a.active {
   background-color: dodgerblue;
   color: white;
}

.pagination a:hover:not (.active ) {
   background-color: #ddd;
}
</style>
<style>
.searchWord {
   background-color: yellow;
   color: red;
}
</style>
<style>
.title {
   display: inline-block;
   white-space: nowrap;
   width: 90%;
   overflow: hidden;
   text-overflow: ellipsis;
}
</style>

</head>
<body>

<h3>list.jsp</h3>

<div align="center">
  <h2>목록 보기</h2>
  <a href="<%=contextPath %>/cstvsboard/write.html">글쓰기</a>
  <table style="width:600px;">
    <thead>
      <tr>
        <th width="10%">번호</th>
        <th width="45%">제목</th>
        <th width="17%">작성자</th>
        <th width="20%">등록일</th>
        <th width="10%">조회</th>
      </tr>
    </thead>
    <tbody>     
      <c:if test="${ empty list }">
        <tr>
          <td colspan="5">등록된 게시글이 없습니다.</td>
        </tr>
      </c:if>
      <c:if test="${ not empty list }">
         <c:forEach items="${ list }" var="dto" end="9">
            <tr>
              <td>${ dto.seq }</td>
              <td>
              	<a class="title" 
              		href="<%=contextPath %>/cstvsboard/content.html?seq=${dto.seq}">
              		${ dto.title }</a>
              		<c:if test="${dto.newmark }">
              			<img src="<%=contextPath %>/days04/board/images/ico-new.gif" alt="" />
              		</c:if>
              </td>
              <td>
              	<c:if test="${dto.writer == '홍길동' }">
              		<img src="<%=contextPath %>/days04/board/images/star.gif" alt="" />
              	</c:if>
              <a href="mailto:${dto.email }">${ dto.writer }</a></td>
              <td>${ dto.writedate }</td>
              <td>${ dto.readed }</td>
            </tr>
         </c:forEach>         
      </c:if>      
  
    </tbody>
    <tfoot>
      <tr>
        <td colspan="5" align="center">
           <div class="pagination"> 
            <!--  <a href="#" class="active"> 1 </a>   -->
             <a href="#"> 1 </a>  
             <a href="#"> 2 </a>
             <a href="#"> 3 </a>
             <a href="#"> 4 </a>
             <a href="#"> 5 </a>
             <a href="#"> 6 </a>
             <a href="#"> 7 </a>
             <a href="#""> 8 </a>
             <a href="#"> 9 </a>
             <a href="#"> 10 </a>
             <a href="#"> &raquo; </a>         
           </div>     
        </td>
      </tr>    
      <tr>
        <td colspan="5" align="center">
          <form>
            <select name="searchCondition" id="searchCondition">
              <option value="1">title</option>
              <option value="2">content</option>
              <option value="3">writer</option>
              <option value="4">title+content</option>
            </select>
            <input type="text" name="searchWord" id="searchWord" />
            <input type="submit" value="search" />
          </form>
        </td>
      </tr> 
    </tfoot>
  </table>
</div>

<script>
	if ('${param.delete}' == 'success') {
		alert("글 삭제 완료!!!");
	} 
</script>

<script>
	// ?write=success 
	if ('${param.write}' == 'success') {
		alert("글 쓰기 완료!!!");
	}
</script>

<script>
  $(".pagination a").each(function(i, element) {     
     $(this).removeClass("active");     
       if ( $(element).text().trim() == ${ empty param.currentPage ? '1' : param.currentPage } ){
          $(this)
             .addClass("active")
             .attr("href" , "#" );          
       }else{
        $(this).attr("href" , "<%= contextPath %>/cstvsboard/list.html?currentPage=" + $(element).text().trim() );
       }  
  })
</script>
</body>
</html>
```



## 작성자아이콘

![image-20211224160807110](../../../assets/images/image-20211224160807110.png)

```jsp
<%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ include file="/include.jspf" %>

<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>2021. 12. 23. - 오후 3:06:20</title>
<link rel="icon" type="image/x-icon" href="../images/SiSt.ico">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> 

<style>
table, td, th {
   border: solid 1px gray;
}

table {
   border-spacing: 3px;
   border-collapse: separate;
}

table, tr, td {
   /* border-radius: 3px; */
   /* padding:3px;  */
   
}

tbody tr  td:nth-of-type(2) {
   text-align: left;
}

a {
   text-decoration: none;
   color: black;
}

a:hover {
   color: red;
}
</style>
<!-- 페이징 처리 style -->
<style>
.pagination {
   margin: 0 auto;
   display: flex;
   justify-content: center;
}

.pagination a {
   color: black;
   float: left;
   padding: 4px 8px;
   text-decoration: none;
   transition: background-color .3s;
}

.pagination a.active {
   background-color: dodgerblue;
   color: white;
}

.pagination a:hover:not (.active ) {
   background-color: #ddd;
}
</style>
<style>
.searchWord {
   background-color: yellow;
   color: red;
}
</style>
<style>
.title {
   display: inline-block;
   white-space: nowrap;
   width: 90%;
   overflow: hidden;
   text-overflow: ellipsis;
}
</style>

</head>
<body>

<h3>list.jsp</h3>

<div align="center">
  <h2>목록 보기</h2>
  <a href="<%=contextPath %>/cstvsboard/write.html">글쓰기</a>
  <table style="width:600px;">
    <thead>
      <tr>
        <th width="10%">번호</th>
        <th width="45%">제목</th>
        <th width="17%">작성자</th>
        <th width="20%">등록일</th>
        <th width="10%">조회</th>
      </tr>
    </thead>
    <tbody>     
      <c:if test="${ empty list }">
        <tr>
          <td colspan="5">등록된 게시글이 없습니다.</td>
        </tr>
      </c:if>
      <c:if test="${ not empty list }">
         <c:forEach items="${ list }" var="dto" end="9">
            <tr>
              <td>${ dto.seq }</td>
              <td>
              	<a class="title" 
              		href="<%=contextPath %>/cstvsboard/content.html?seq=${dto.seq}">
              		${ dto.title }</a>
              		<c:if test="${dto.newmark }">
              			<img src="<%=contextPath %>/days04/board/images/ico-new.gif" alt="" />
              		</c:if>
              </td>
              <td>
              	<c:if test="${dto.writer == '홍길동' }">
              		<img src="<%=contextPath %>/days04/board/images/star.gif" alt="" />
              	</c:if>
              <a href="mailto:${dto.email }">${ dto.writer }</a></td>
              <td>${ dto.writedate }</td>
              <td>${ dto.readed }</td>
            </tr>
         </c:forEach>         
      </c:if>      
  
    </tbody>
    <tfoot>
      <tr>
        <td colspan="5" align="center">
           <div class="pagination"> 
            <!--  <a href="#" class="active"> 1 </a>   -->
             <a href="#"> 1 </a>  
             <a href="#"> 2 </a>
             <a href="#"> 3 </a>
             <a href="#"> 4 </a>
             <a href="#"> 5 </a>
             <a href="#"> 6 </a>
             <a href="#"> 7 </a>
             <a href="#""> 8 </a>
             <a href="#"> 9 </a>
             <a href="#"> 10 </a>
             <a href="#"> &raquo; </a>         
           </div>     
        </td>
      </tr>    
      <tr>
        <td colspan="5" align="center">
          <form>
            <select name="searchCondition" id="searchCondition">
              <option value="1">title</option>
              <option value="2">content</option>
              <option value="3">writer</option>
              <option value="4">title+content</option>
            </select>
            <input type="text" name="searchWord" id="searchWord" />
            <input type="submit" value="search" />
          </form>
        </td>
      </tr> 
    </tfoot>
  </table>
</div>

<script>
	if ('${param.delete}' == 'success') {
		alert("글 삭제 완료!!!");
	} 
</script>

<script>
	// ?write=success 
	if ('${param.write}' == 'success') {
		alert("글 쓰기 완료!!!");
	}
</script>

<script>
  $(".pagination a").each(function(i, element) {     
     $(this).removeClass("active");     
       if ( $(element).text().trim() == ${ empty param.currentPage ? '1' : param.currentPage } ){
          $(this)
             .addClass("active")
             .attr("href" , "#" );          
       }else{
        $(this).attr("href" , "<%= contextPath %>/cstvsboard/list.html?currentPage=" + $(element).text().trim() );
       }  
  })
</script>
</body>
</html>
```



## 페이징블럭

(7) 페이징블럭 1 2 3 4 5 6 7 8 9 10



1. PageBlock.java

**페이징블럭**

```jsp
<c:if test="${ pageBlock.prev }"> 
    <a href="${  pageContext.request.contextPath }/cstvsboard/list.html?currentPage=${ pageBlock.start -1 }">&laquo;</a> 
</c:if>
<c:forEach begin="${ pageBlock.start }" end="${ pageBlock.end }" step="1" var="i">
    <c:if test="${ i == currentPage }">
        <a href="#">{i}</a>
    </c:if>
    <c:if test="${ i != currentPage }">
        <a href="${  pageContext.request.contextPath }/cstvsboard/list.html?currentPage=${ i }">${ i }</a> 
    </c:if>
</c:forEach>
<c:if test="${ pageBlock.next }"> 
    <a href="${  pageContext.request.contextPath }/cstvsboard/list.html?currentPage=${ pageBlock.end +1 }">&raquo;</a> 
</c:if> 
```







**list.jsp**

```jsp
```

**PageBlock.java**

```java
```

**List.java**

```java
```

