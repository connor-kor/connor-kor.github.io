---
title: 강의4
category: fullstack-class
---

## 10.7

복습

1. 1차_조편성.txt 파일을 읽어서
   컬렉션 클래스를 사용하여 아래와 같이 출력
   ( 조건 : 팀원들은 오름차순 정렬해서 출력 )

5.  InputStream is = System.in; 
    을 사용해서 문자열을 입력받아서 출력하고
    바이트스트림을 이용해서 message.dat 로 저장하세요. 
    
    > 문자열을 입력 ? 안녕하세요~ 
    > 출력 : 안녕하세요~

try-with-resources 를 사용하지 않으면 `flush()` 와 `close()` 를 꼭 해줄 것.

```java
InputStream is = System.in;
try (FileWriter fw = new FileWriter("message.dat");) {
    System.out.print("> 문자열을 입력 ? ");
    String str = new String(is.readAllBytes());
    fw.write(str);
    System.out.printf("> 출력 : %s", str);
} catch (IOException e) {
    e.printStackTrace();
}
```



---

p.918 표 15-28

**file.**

- `getCanonicalPath()` 절대경로
- `getAbsolutePath()` 현재경로 + 상대경로
- `getPath()` 상대경로
- `getName()` 파일이름 + 확장자
- `getParent()` 상대경로 혹은 그 위 디렉토리 ex) .. or C:\class ~~
- `mkdir()` 폴더생성
- `mkdirs()` 필요하면 부모디렉토리까지 생성
- `setExecutable()` ~set 으로 시작하는 것은 속성변경
- `setReadable()` 
- `setReadOnly()` 
- `setWritable()` 
- `toPath()` Path 로 변경
- `toURI` URL 로 변경
- `getTotalSpace()`
- `getUsableSpace()`
- `getFreeSpace()` 
- `delete()` 파일이나 폴더 삭제하고 true 반환. 하위폴더나 파일이 존재하면 삭제가 되지 않는다.
- `deleteOnExit()` 자바 가상머신이 종료될 때 삭제. 아무것도 반환하지 않는다.
- static `createTempFile()` 임시파일을 만든다.
- static `listRoots()` 파일목록을 File배열로 반환. filter 를 지정한 경우 조건과 일치하는 파일만 반환.

출력

```
C:\class\javaClass\PDFEditor.exe
C:\class\javaClass\javaPro\..\pdfEditor.exe
..\pdfEditor.exe
```

코드

```java
String path = "..\\pdfEditor.exe";
File file = new File(path);

System.out.println(file.getCanonicalPath());
System.out.println(file.getAbsolutePath());
System.out.println(file.getPath());
```

**멤버변수**

- `pathSeparator` 경로와 다른 경로를 구분한다. ex) 윈도우 - ;
- `separator`  왼도우 = \
- `pathSeparatorChar` 문자로 반환
- `separatorChar` 문자로 반환

> 웹에서는 구분을 슬래쉬 / 로 한다.

**용량**

```
C:\
492136894464
146675113984
146675113984
```



```java
File[] rootList = File.listRoots();

for (File f : rootList) {
    System.out.println(f 
            + "\n" + f.getTotalSpace() 
    + "\n" + f.getUsableSpace() 
    + "\n" + f.getFreeSpace());
```

> 하위폴더를 계속해서 찾을 때 재귀함수를 쓴다.

**폴더정보 표시**

![image-20211007104803087](../../../assets/images/image-20211007104803087.png)

```java
for (File f : rootList) {
    File[] subList = f.listFiles();

    for (int i = 0; i < subList.length; i++) {
        File sf = subList[i];
        if (sf.isDirectory()) {
            System.out.print("[폴더]");
        } else if (sf.isFile()) {
            System.out.print("[파일]");
        }
        System.out.printf("\t%s\t%s\t%s (byte)\n"
                , new Date(sf.lastModified())
                , sf.getName()
                , sf.length());
    }
}
```

**오늘날짜 폴더와 조 만들기**

아래와 같이 날짜와 조 폴더 만들기

C:\SS15Class

- ㄴ 20211007(목)
  - ㄴ 1조
    - 김현준(팀장)
    - 권영훈
    - 문경록
    - 윤영선
    - 조영빈
  - ㄴ 2조
  - ㄴ 3조
  - ㄴ 4조
  - ㄴ 5조

```java
String parent = "C:\\SS15Class";
LocalDate d = LocalDate.now();
String pattern = "yyyyMMdd(E)";
DateTimeFormatter formatter = DateTimeFormatter.ofPattern(pattern);
String child = d.format(formatter);
File f = new File(parent, child);
String fileName = ".\\src\\days26\\1차_조편성.txt";

try (FileReader fr = new FileReader(fileName);
        BufferedReader br = new BufferedReader(fr);) {
    String line;
    String regex = "[:,]";
    String[] tm;
    String teamName;
    while ((line = br.readLine()) != null) {
        tm = line.split(regex);
        teamName = tm[0];
        File tf = new File(f, teamName);
        tm[1] += "(팀장)";

        for (int i = 1; i < tm.length; i++) {
            File mf = new File(tf, tm[i]);
            mf.mkdirs();
        }
    }
} catch (Exception e) {
    e.printStackTrace();
}
System.out.println("= END =");
```

SimpleDateFormat 은 Date 클래스를 DateTimeFormatter 는 Local 클래스를 위한 클래스이다.

DateTimeFormatter 는 new 대신 ofPattern 메서드를 사용한다.

`date.format(formatter)` 메서드를 사용한다.

**텍스트파일 복사**

```
543 bytes
> 처리 시간 : 0.0577339sec
 = Copy End = 
```

```java
public class Ex05 {
	public static void main(String[] args) {
		String originalPath = ".\\src\\days27\\Ex01.java";
		String copyPath = "C:\\class\\download\\Ex01_100.java";
		fileCopy_textStream(originalPath, copyPath);
		System.out.println(" = Copy End = ");
	} // main

	private static void fileCopy_textStream(String originalPath, String copyPath) {
		long start = System.nanoTime();
		File orignalFile = new File(originalPath);
		System.out.printf("%d bytes\n", orignalFile.length()); // 2,385,496 bytes

		try (FileReader fr = new FileReader(originalPath); 
				FileWriter fw = new FileWriter(copyPath)) {
			int c = -1;
			
			while ((c = fr.read()) != -1) {
				fw.write(c);
			}
		} catch (IOException e) {
			e.printStackTrace();
		}
		long end = System.nanoTime();
		System.out.println("> 처리 시간 : " + (end - start) / Math.pow(10, 9) + "sec");
	}
}
```

p.923 예제 15-32 

