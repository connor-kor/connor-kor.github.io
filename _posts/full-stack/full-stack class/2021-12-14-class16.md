---
title: 강의16
category: fullstack-class
---

# 12.14

1/17 발표 혹은 1/24 발표

1/29~ 스프링프로젝트

**람다식**

```javascript
lotto.sort((a, b) => a - b);
```

**[로또번호 생성]**

```html
<button>로또 번호 발생기</button>
<div id="demo"></div>

<script>
    var lotto = [];
    document.querySelector("button").onclick = function() {
        var n;

        while (lotto.length < 6) {
            n = getRndRange(1, 45);

            if (isDuplicationLotto(lotto, n)) {
                lotto.push(n);
            }
        }

        lotto.sort(function(a, b) {
            return a - b;
        });


        $("#demo").text(lotto);
    }

    function getRndRange(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function isDuplicationLotto(lotto, n) {
        lotto.every(function(elt, i, array) {
            return elt != n;
        })
    }
</script>
```



녹화본: 9:38 로또생성기



**[자료구조]**



## **함수**

**Set**

- `add(요소)` 
- `delete(요소)` 
- `clear()` 모든요소 제거
- `has(요소)` boolean 반환
- `forEach([value], [key], [set] => )` 
- `size` 괄호없다. 

**Map**

- `set(key, value)`
- `get(key)`
- `delete(key)`
- `has()`
- `forEach((value, key, [map]) => )`
- `entries()`
- `size`

---

**Set**

```javascript
letters.forEach((val) => console.log(val));
```



```javascript
for (let e of letters.values()) {
    console.log(e);
}
```

> values() 가 없어도 동작한다.



문제제시) js Set 을 사용해서 로또번호 발생하는 코딩.

**Map**

- new Map()

  

**forEach**

```
apple: 10
banana: 3
orange: 15
```

```javascript
fruits.forEach((v, k) => console.log(k + ": " + v));
```



```javascript
for (let entry of fruits.entries()) {
    console.log(entry);
}
```

`entries()` 를 생략해도 된다.

**[동적 테이블 생성]**

```javascript
var tbl = document.createElement("table");
tbl.setAttribute("border", 1);
tbl.setAttribute("style", "width:100%");

var tr = tbl.insertRow(tbl.rows.length);

for (var i = 2; i <= 9; i++) {
    var th = tr.insertCell(i - 2);
    th.innerHTML = i + "단";
} // for
document.getElementById("demo").appendChild(tbl);
```



**구구단**

```javascript
for (var i = 1; i <= 9; i++) {
    var tr = tbl.insertRow(tbl.rows.length);

    for (var j = 2; j <= 9; j++) {
        var th = tr.insertCell(j - 2);
        th.innerHTML = j + "x" + i + "=" + i * j;
    } // for
    document.getElementById("demo").appendChild(tbl);
}
```



**국어점수 입력**

```javascript
$("button").click(
    function() {
        var kor = $("#kor").val();

        if (0 <= kor && kor <= 100) {
            var text = 
                kor >= 90 ? "수" 
            : kor >= 80 ? "우"
            : kor >= 70 ? "미" 
            : kor >= 60 ? "양" 
            : "가";

            console.log(text);
        } else {
            console.log("0~100 사이 정수를 입력하세요.")
        }
    });
```

**정규표현식**

**regex.**

- `test(string)` 일치하면 boolean 반환
- `exec()` 패턴 체크 후 일치하면 텍스트 반환. 일치하지 않으면 null 반환



```javascript
$("button").click(
    function() {
        var kor = $("#kor").val();
        var pattern = /^(100|[1-9]?\d)$/;

        if (pattern.test(kor)) {
            alert("수우미약가");
        } else {
            alert("국어 점수 입력 잘못!!!");
            $("#kor").focus().select();
        }
    });
```



```
['is', index: 4, input: '\nIs is th\nis it?', groups: undefined]
```

```javascript
var msg = "\nIs is th\nis it?";
var pattern = /is/;
// var pattern = /is/i; i 는 대소문자를 구분하지 않는다.
var result = msg.match(pattern);

console.log(result);
```

- `i` 대소문자를 구분하지 않는다.
- `g` 일치하는 모든 것을 찾는다.
- `m` 멀티라인 (라인별로 is 로 시작). `/^is/m` 

**[예외처리]**

- `try-catch-finally` 
- `throw` 



**엔터**

```javascript
if (event.keycode == 13) {}
```

**예외처리: kor 입력**

```javascript
$("#kor").keyup(function(event) {
    if (event.keyCode == 13) {
        try {
            var kor = $("#kor").val();

            if (kor.trim().length == 0) {
                throw "kor 필수 입력";
            } else if (isNaN(kor)) {
                throw "kor Not a Number";
            }
            alert("입력 성공!!!");
        } catch (e) {
            $("#demo").html("> 에러 메시지: " + e);
        }
    } // if
}); // enter
```



```javascript
test();

function test() {
    var n = 100;
    document.write("1. " + n + "<br>");
}
document.write("2. " + n + "<br>");
```

`var n` 에서 var 이 없으면 n 은 전역변수가 된다.

전역변수 `n = 100` 으로 선언되면 `window.n` 와 같이 window 의 객체가 된다.



use strict 엄격모드: 반드시 변수를 선언하고 사용하겠다.

ECMAScript5 도입



**[this]**

```javascript
var x = this;
```

전역변수, 브라우저 닫힐 때까지 사용.



js => 화살표 함수, 람다식 ES6 도입

화살표 함수를 사용하면 더 짧은 함수구문을 작성할 수 있다.



일반함수 vs 화살표함수

일반함수: 함수를 호출한 객체

람다식: window 객체



js class 키워드를 사용해서 클래스를 선언할 수 있다.

ECMAScript 2015 == ES6 도입

**객체**

```javascript
class Car {
    // 객체 생성될 때 자동으로 호출되는 함수 (생성자)
    constructor(name, year) {
        this.name = name;
        this.year = year;
    }
    age(year) {
        return year - this.year;
    }
}
var myCar = new Car("BMW", 2019);
console.log(myCar.name + " / " + myCar.year + " / " + myCar.age(2021));
```



**[forms 컬렉션]**

```javascript
<form action="ex10_ok.jsp">
    Name: <input type="text" name="name" autofocus />
        Age: <input type="text"
name="age" /> <input type="submit" />
    </form>
```



**JSP**

```jsp
<%
String name = request.getParameter("name");
int age = Integer.parseInt(request.getParameter("age"));
%>

> 서버로 전송된 Name: <%= name %> <br>
> 서버로 전송된 Age: <%= age %> <br>
```



```javascript
document.forms[name] // 형식
document.forms["form1"]
document.forms[0]
```





js 객체는 기본형을 제외하면 모두 js 객체이다.

js 기본형

- string
- number
- boolean
- null
- undefined

js 객체

- new Number()	
- new Boolean()
- new 키워드로 정의된 경우: string, number, boolean -> 객체
- Date, Math, 정규식, 배열, 함수 (function), object



```javascript
// 1. 새로운 필드 (속성) 추가
// person.새로운속성명 = 속성값;
person.nationality = "Korea";

// 2. 속성을 삭제
delete person.eyecolor;
```



**객체**

```javascript
// js 객체는 기본형을 제외하면 모두 js 객체이다.
var person = {
    firstname: "john"
    , lastname: "Doe"
    , age: 50
    , eyecolor: "blue"
    , fullName: function() {
        return this.firstname + " " + this.lastname;
    }
};

// 1. 새로운 필드 (속성) 추가
// person.새로운속성명 = 속성값;
person.nationality = "Korea";

// 2. 속성을 삭제
delete person.eyecolor;

// 3. 메서드 호출
var name = person.fullName();

// 4. 메서드 추가
// person.메서드명 = function() {}
person.name = function() {
    return this.firstname + " " + this.lastname;
}

// 5-1. 모든 속성(필드)를 출력
for ( var p in person) {
    // 			console.log(person.p);
    // 			console.log(person[p]);
}

// 5-2.
var Arr = Object.values(person);
console.log(Arr.join("<br>"));
```



Q. this 붙여야 하나?

A.



```javascript
var person = {
    firstname: "john"
    , lastname: "Doe"
    , language: "kr"

    // getter
    , get lang() {
        return this.language.toUpperCase();
    }
    , set lang(lang) {
        this.language.toUpperCase();
    }
    , get fullName() {
        return this.firstName + " " + this.lastname;
    }
}

console.log(person.fullName);
person.lang = "en";
// 		getter 호출
console.log(person.lang);
```



**[객체 생성자]**

객체를 만들 때 사용되는 함수 



```javascript
function Car(name, year) {
    this.name = name;
    this.year = year;
}
var myCar = new Car("K9", 2020);
// console.log(myCar.name) K9

function Person(fname, lname, age, eyecolor) {
    this.fname = fname;
    this.lname = lname;
    this.age = age;
    this.eyecolor = eyecolor;

    // 메서드 선언 가능
    this.name = function() {
        return this.fname + " " + this.lname;
    }
    this.changeName = function(name) {
        this.lname = name;
    }
}

// 1. 객체 생성자를 통해서 myFather, myMother 객체 생성...
var myFather = new wPerson("john", "doe", 40, "blue");
var myMother = new wPerson("sally", "doe", 35, "green");

// 객체를 만들 때 사용되는 함수
// 2. 객체생성자 -> 객체 생성
// 생성된 객체를 통해서 속성을 추가할 수 있다.
myFather.nationality = "Korea";
// 		Person.nationality = "Korea"; 객체생성자를 통해서 속성을 추가할 수 없다.

// 3. 객체를 통해서 메서드 추가
myFather.name = function() {
    return this.fname + "/" + this.lname;

    // 4. [객체 생성자] 를 통해서 속성 + 메서드 추가하는 방법
    Person.prototype.bloodType = 'A';
    Person.prototype.getBlood = function() {
        return this.bloodType;
    }
}
```



**[call&apply]**

- `call()`
- `apply()` 

**call 예제**

```javascript
document.write(person.print.call(person1) + "<br>");
```

person1 에 없는 함수를 person 에서 사용



메서드의 매개변수가 없을경우 call 과 apply 는 같은역할이다.



```javascript
document.write(person.print.call(person1, 'a', 'kr') + "<br>");
document.write(person.print.apply(person1, ['a', 'kr']) + "<br>");
```



```javascript
var person1 = {
    name: "hong"
    , age: 20
};

var person2 = {
    name: "admin"
    , age: 45
};

var person = {
    // 매개변수가 있는 print 메서드
    print: function(city, language) {
        return this.name + " / " + this.age 
            + " / " + city + " / " + language;
    }
};

document.write(person.print.call(person1, 'a', 'kr') + "<br>");
document.write(person.print.apply(person1, ['a', 'kr']) + "<br>");
document.write(Math.max.apply(null, [1, 5, 3, 4, 2]) + "<br>");
```



```javascript
window.onload = function() {
    alert("window.load 이벤트 발생~~");
}
```

body 태그에 onload 속성을 줘도 된다.



```javascript
setTimeout(dispTime, 1000); // callback 함수
```

1000ms (1초) 후에 dispTime 함수 호출.

**[시계]**

```javascript
<h1 id="demo"></h1>
<button onclick="timer_start()">setTimeout()</button>
<button onclick="timer_stop()">clearTimeout()</button>

<script>
    var demo;
window.onload = function() {
    // 			alert("window.load 이벤트 발생~~");
    window.demo = document.getElementById("demo");

}

var timer;
function dispTime() {
    var now = new Date();
    demo.innerHTML = now.toLocaleString();
    timer = setTimeout(dispTime, 1000); // callback 함수
}

function timer_start() {
    dispTime(); // 함수호출
}
```



```javascript
var demo;
window.onload = function() {
    // 			alert("window.load 이벤트 발생~~");
    window.demo = document.getElementById("demo");

}

var timer;
function dispTime() {
    var now = new Date();
    demo.innerHTML = now.toLocaleString();
}

function timer_start() {
    // 1초마다 dispTime 콜백함수를 호출하라.
    setInterval(dispTime, 1000);
}

function timer_stop() {
    clearInterval(timer);
}
```

- `setTimeout` 1초후 1번 호출
- `setInterval` 1초마다 호출

`document.documentElement` html 요소



**[글자찍기]**

```html
<button onclick="btn_typeWriter();">TypeWriter</button>
<p id="box"></p>

<script>
    var content;
    var contentLength;
    var box = document.getElementById("box");

    function btn_typeWriter() {
        // <html> 루트엘리먼트
        content = document.documentElement.innerHTML;
        // 			alert(content);
        contentLength = content.length;

        typeWriter();
    }

    var i = 0;
    var timer;

    function typeWriter() {
        if (i <= contentLength) {
            var oneChar = content.charAt(i++);
            box.innerHTML += oneChar == '\n' ? "<br>" : oneChar;

            timer = setTimeout(typeWriter, 50);
        } else {
            clearTimeout(timer);
            alert("출력완료!!!");
        }
    }
</script>
```



**스크롤 간격**

```javascript
document.body.scrollTop = 0;
document.documentElement.scrollTop = 0;
```

브라우저에 따라 body 태그에 줘야되는 브라우저도 있고 html 태그에 줘야되는 브라우저도 있다.



**속성**

- `scrollTop` 
- `scrollHeight`
- `clientHeight` 

```javascript
var scrollTop = document.body.scrollTop || document.documentElement.scrollTop;
```



hH : sT = 100% : x ?

x = (100% * sT) / hH



**[스크롤 예제]**

```html
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<style>
body {
	margin: 0;
	font-size: 28px;
}

.header {
	position: fixed;
	top: 0;
	z-index: 1;
	width: 100%;
	background-color: #f1f1f1;
}

.header h2 {
	text-align: center;
}

.process-container {
	width: 100%;
	height: 8px;
	background: #ccc;
}

.progress-bar {
	height: 8px;
	background-color: red;
	width: 0;
}

.content {
	padding: 100px 0;
	margin: 50px auto 0 auto;
	width: 80%;
}
</style>
<style>
#btnTop {
	position: fixed;
	bottom: 20px;
	right: 30px;
	z-index: 99;
	outline: none;
	background: red;
	color: white;
	padding: 15px;
	border-radius: 10px;
	display: none;
	border: none; /* 버튼은  기본적으로 테두리가 있다.. */
}

#btnTop:hover {
	background: #555;
}
</style>
</head>
<body>
	<div class="header">
		<h2>스크롤 표시하기</h2>
		<div class="process-container">
			<div class="progress-bar" id="myBar"></div>
		</div>
	</div>
	<!-- .content>p*40>lorem8 -->
	<div class="content">
		<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
		<p>Repellat praesentium ex animi eos in excepturi quod?</p>
		<p>Quas a commodi labore quidem nihil ipsum reiciendis.</p>
		<p>Eum quisquam laboriosam modi impedit ipsam iste consectetur.</p>
		<p>Minima accusantium architecto minus ex odit exercitationem
			similique.</p>
		<p>Modi dolores quo ipsa voluptate eius ratione eum!</p>
		<p>Rem vel tempora repudiandae quod consequatur fugit sequi.</p>
		<p>Expedita assumenda eius molestias eum quas nisi aliquam!</p>
		<p>Tempora deleniti magnam minus ullam officiis tempore dolor!</p>
		<p>Molestias obcaecati eum impedit facere vel. Dolorem quod.</p>
		<p>Autem mollitia dolores vitae aspernatur consequatur ratione
			quis?</p>
		<p>Neque veritatis ut iste sequi debitis ex iure?</p>
		<p>Aliquam corporis dolore voluptatibus quas dolorum maxime animi.</p>
		<p>Officiis odit temporibus non assumenda laudantium quam labore.</p>
		<p>Id eum explicabo nulla quidem necessitatibus eos sapiente.</p>
		<p>Est quibusdam aliquid doloribus voluptatum iusto quis
			doloremque.</p>
		<p>Doloremque rem non voluptas quaerat rerum veniam odit?</p>
		<p>Dicta libero ab est incidunt accusantium voluptatum
			praesentium.</p>
		<p>Cumque est culpa provident distinctio consectetur voluptatem
			nobis.</p>
		<p>Explicabo ex error similique est magni nihil deleniti!</p>
		<p>Doloribus repellendus quos deleniti debitis delectus
			reprehenderit fuga!</p>
		<p>Consequatur quia architecto impedit aspernatur tempore alias
			dolores.</p>
		<p>Ea temporibus cumque laudantium autem similique distinctio
			omnis.</p>
		<p>Harum eligendi iusto saepe cumque tenetur delectus praesentium.</p>
		<p>Laborum culpa iure aspernatur omnis ipsum unde deserunt?</p>
		<p>Debitis voluptatibus distinctio maiores accusamus nesciunt
			facere voluptate!</p>
		<p>Eum dignissimos ut delectus ab atque tempore quaerat.</p>
		<p>Dicta ipsum esse quam modi eligendi possimus excepturi.</p>
		<p>Nobis velit culpa reprehenderit sit ut unde voluptatibus.</p>
		<p>Hic nostrum natus dolore laudantium odio aut et?</p>
		<p>Officiis autem voluptatem eveniet neque veniam accusantium
			corporis.</p>
		<p>Dolore eius id magni sint a quos ipsum.</p>
		<p>Dignissimos blanditiis aliquid inventore tempora ratione dolore
			ab.</p>
		<p>Officia aut ea cupiditate cumque non quae blanditiis.</p>
		<p>Officiis nemo sit eos dicta necessitatibus incidunt aliquid.</p>
		<p>Qui et libero nesciunt quia dolor quae optio.</p>
		<p>Ipsam itaque reprehenderit blanditiis quam dignissimos magni
			delectus!</p>
		<p>Amet officia dolorum temporibus maiores quos voluptates ea.</p>
		<p>Voluptas omnis soluta culpa fuga cupiditate sunt iure.</p>
		<p>Aut voluptas illo assumenda sed provident quod cupiditate!</p>
	</div>

	<!-- button#btnTop[title="Go  To Top"]>{Top} -->
	<button id="btnTop" title="Go To Top">Top</button>

	<script>
		window.onscroll = function() {
			console.log("window.scroll 이벤트");
			var scrollTop = document.body.scrollTop
					|| document.documentElement.scrollTop;
			var scrollHeight = document.documentElement.scrollHeight;
			var clientHeight = document.documentElement.clientHeight;

			var hiddenHeight = scrollHeight - clientHeight;
			console.log(scrollTop + " / " + clientHeight + " / " + scrollHeight
					+ " / " + hiddenHeight);

			var widthPercent = (100 * scrollTop) / hiddenHeight;

			document.getElementById("myBar").style.width = widthPercent + "%";

			if (scrollTop >= clientHeight) {
				document.getElementById("btnTop").style.display = "block";
			} else {
				document.getElementById("btnTop").style.display = "none";
			}
		}
	</script>


	<script>
		document.getElementById("btnTop").onclick = function() {
			document.body.scrollTop = 0;
			document.documentElement.scrollTop = 0;
		}
	</script>
</body>
</html>
```

**[클릭이벤트]**

1. onclick 속성



**같은코드**

```javascript
document.getElementsByTagName("h1")[0]
document.querySelector("h1")
document.querySelectorAll("h1")[0]
```



```javascript
document.querySelector("h1").onclick = function() {
    alert("hi~~~");
}
// 		document.querySelectorAll("h1")[0]

document.getElementsByTagName("h1")[0].addEventListener("click",
                                                        function(e) {
    console.log("addEventListener ~");
});

function test() {
    console.log("test~~~~");
}

document.getElementsByTagName("h1")[0].addEventListener("click", test);
```

onclick 과 다르게 addEventListener 는 여러개의 이벤트를 등록할 수 있다.



[이벤트의 전파방법]

1. 이벤트버블링: 자식 -> 부모이벤트가 전달 (전파)
2. 이벤트 캡쳐: 부모 -> 자식 이벤트 전달

#in 클릭 -> #out 클릭

자식 p 부모 div 로 클릭이벤트 전파.



**버블링**

```javascript
event.cancelBubble = true;
```

- `addEventListener("click", 함수, [capture])` capture false 이면 기본값.

jQuery 버블링 코딩은 다르다. 검색하면 된다.





1. 함수정리
2. +++ 클로저 +++ (closures) - 폐쇄



```javascript
function sum(a, b = 1) {
    return a + b;
}

var hap = function(a, b) {
    return a + b;
};

var myFunc = new Function("a", "b", "return a * b");
```

함수를 변수에 저장할 때에는 세미콜론이 필요하다.



**[자체호출함수]+++**

```javascript
(function() {
    alert("hello world~");
})();
```



**함수를 문자열로**

```javascript
function sum(a, b) {
    return a + b;
}

var str = sum.toString();
alert(str);
```

**[클로저(closure)]**

전역변수는 다른페이지로 이동하거나 창을 닫을 때와 같이 페이지가 삭제될 때까지 유지된다.

지역변수는 함수가 호출될 때 생성되고, 함수가 완료되면 삭제된다.



**1 더하기 예제**



**클로저 개념**

익명함수 (상위함수) 의 지역변수로 선언된 counter 변수가 보존 (보호) 되며

add() 함수를 통해서만 변경할 수 있더라.

counter 변수는 익명함수 (상위함수) 가 닫힌 후 (폐쇄)에도 상위 counter 변수는 보존 (보호) 되기에 접근가능하더라.



```javascript
// 자체 호출 함수
// return 중첩함수
var add = (function() {
    let counter = 0; // 지역변수 X 전역변수 O
    return function() {
        counter++;
        return counter;
    };
})();

document.write(add()); // 1
document.write(add()); // 2
document.write(add()); // 3
```

